<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ApplyDao">
	<select id="WkApplyCount" resultType="WkApplycount" parameterType="String">
		select count(*) as countall,
        	count(case when app_sts='001' then 1 end) as applying, 
        	count(case when app_sts='002' then 1 end) as passdoc,
        	count(case when app_sts='003' then 1 end) as failed,
        	count(case when app_sts='004' then 1 end) as pass
		from apply where user_id = #{mbid}
	</select>
	
		<select id="WkApplyList" resultType="WkApply" parameterType="String">
		select ap.app_regdate, ap.app_sts, re.res_title, com.com_name, co.comm_ctx
			from apply ap
			inner join resume re
			on ap.user_id=re.user_id
				and ap.res_code=re.res_code
			inner join announce an
			on ap.anno_code=an.anno_code
			inner join company com
			on an.com_id=com.com_id
			inner join comm co
			on an.job_tag=co.sub_cat
			where ap.user_id=#{mbid}
			and co.main_cat='001'
	</select>
	
	
</mapper>